{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:33:54:3354"}
{"duration":12,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        filename VARCHAR(255) NOT NULL UNIQUE,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    ","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigrations table ready\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT filename FROM migrations ORDER BY id","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mFound 6 pending migrations\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":14,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Create extension for UUID generation\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Create user roles enum\nCREATE TYPE user_role AS ENUM ('member', 'librarian');\n\n-- Create users table\nCREATE TABLE users (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    email VARCHAR(255) NOT NULL UNIQUE,\n    password_hash VARCHAR(255) NOT NULL,\n    first_name VARCHAR(100) NOT NULL,\n    last_name VARCHAR(100) NOT NULL,\n    role user_role NOT NULL DEFAULT 'member',\n    max_books_allowed INTEGER NOT NULL DEFAULT 10,\n    refresh_token TEXT,\n    reset_token VARCHAR(255),\n    reset_token_expires TIMESTAMP,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create indexes\nCREATE INDEX idx_users_email ON users(email);\nCREATE INDEX idx_users_role ON users(role);\nCREATE INDEX idx_users_reset_token ON users(reset_token) WHERE reset_token IS NOT NULL;\n\n-- Create trigger to update updated_at timestamp\nCREATE OR REPLACE FUNCTION update_updated_at_column()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = CURRENT_TIMESTAMP;\n    RETURN NEW;\nEND;\n$$ language 'plpgsql';\n\nCREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigration executed: 001_create_users_table.sql\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Create books table\nCREATE TABLE books (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    isbn VARCHAR(20) NOT NULL UNIQUE,\n    title VARCHAR(500) NOT NULL,\n    author VARCHAR(300) NOT NULL,\n    publisher VARCHAR(200),\n    publication_year INTEGER,\n    description TEXT,\n    cover_image_url TEXT,\n    total_copies INTEGER NOT NULL DEFAULT 1,\n    available_copies INTEGER NOT NULL DEFAULT 1,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \n    -- Ensure available copies never exceed total copies\n    CONSTRAINT check_available_copies CHECK (available_copies >= 0 AND available_copies <= total_copies)\n);\n\n-- Create indexes for efficient searching\nCREATE INDEX idx_books_isbn ON books(isbn);\nCREATE INDEX idx_books_title ON books(title);\nCREATE INDEX idx_books_author ON books(author);\nCREATE INDEX idx_books_publisher ON books(publisher);\nCREATE INDEX idx_books_publication_year ON books(publication_year);\nCREATE INDEX idx_books_available_copies ON books(available_copies) WHERE available_copies > 0;\n\n-- Full-text search index for title and author\nCREATE INDEX idx_books_search ON books USING gin(to_tsvector('english', title || ' ' || author));\n\n-- Create trigger to update updated_at timestamp\nCREATE TRIGGER update_books_updated_at BEFORE UPDATE ON books\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigration executed: 002_create_books_table.sql\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Create categories table\nCREATE TABLE categories (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    name VARCHAR(100) NOT NULL UNIQUE,\n    description TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create indexes\nCREATE INDEX idx_categories_name ON categories(name);\n\n-- Create trigger to update updated_at timestamp\nCREATE TRIGGER update_categories_updated_at BEFORE UPDATE ON categories\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigration executed: 003_create_categories_table.sql\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Create book_categories junction table for many-to-many relationship\nCREATE TABLE book_categories (\n    book_id UUID NOT NULL,\n    category_id UUID NOT NULL,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \n    -- Composite primary key to prevent duplicate associations\n    PRIMARY KEY (book_id, category_id),\n    \n    -- Foreign key constraints\n    CONSTRAINT fk_book_categories_book FOREIGN KEY (book_id) \n        REFERENCES books(id) ON DELETE CASCADE,\n    CONSTRAINT fk_book_categories_category FOREIGN KEY (category_id) \n        REFERENCES categories(id) ON DELETE CASCADE\n);\n\n-- Create indexes for efficient queries\nCREATE INDEX idx_book_categories_book_id ON book_categories(book_id);\nCREATE INDEX idx_book_categories_category_id ON book_categories(category_id);","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigration executed: 004_create_book_categories_table.sql\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Create loan status enum\nCREATE TYPE loan_status AS ENUM ('active', 'returned', 'overdue');\n\n-- Create book_loans table\nCREATE TABLE book_loans (\n    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),\n    book_id UUID NOT NULL,\n    user_id UUID NOT NULL,\n    loan_date TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    due_date TIMESTAMP NOT NULL,\n    return_date TIMESTAMP,\n    status loan_status NOT NULL DEFAULT 'active',\n    notes TEXT,\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n    \n    -- Foreign key constraints\n    CONSTRAINT fk_book_loans_book FOREIGN KEY (book_id) \n        REFERENCES books(id) ON DELETE CASCADE,\n    CONSTRAINT fk_book_loans_user FOREIGN KEY (user_id) \n        REFERENCES users(id) ON DELETE CASCADE,\n        \n    -- Business rule constraints\n    CONSTRAINT check_loan_dates CHECK (due_date > loan_date),\n    CONSTRAINT check_return_date CHECK (return_date IS NULL OR return_date >= loan_date),\n    CONSTRAINT check_returned_status CHECK (\n        (status = 'returned' AND return_date IS NOT NULL) OR \n        (status != 'returned' AND return_date IS NULL)\n    )\n);\n\n-- Create indexes for efficient queries\nCREATE INDEX idx_book_loans_book_id ON book_loans(book_id);\nCREATE INDEX idx_book_loans_user_id ON book_loans(user_id);\nCREATE INDEX idx_book_loans_status ON book_loans(status);\nCREATE INDEX idx_book_loans_due_date ON book_loans(due_date);\nCREATE INDEX idx_book_loans_user_status ON book_loans(user_id, status);\nCREATE INDEX idx_book_loans_book_status ON book_loans(book_id, status);\n\n-- Index for overdue loans checking\nCREATE INDEX idx_book_loans_overdue ON book_loans(due_date) WHERE status = 'active';\n\n-- Unique constraint to prevent multiple active loans of the same book by the same user\nCREATE UNIQUE INDEX idx_unique_active_user_book_loan \nON book_loans(user_id, book_id) \nWHERE status = 'active';\n\n-- Create trigger to update updated_at timestamp\nCREATE TRIGGER update_book_loans_updated_at BEFORE UPDATE ON book_loans\n    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigration executed: 005_create_book_loans_table.sql\u001b[39m","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","text":"-- Additional performance indexes for common query patterns\n\n-- Composite indexes for book searches with filters\nCREATE INDEX idx_books_author_available ON books(author, available_copies) WHERE available_copies > 0;\nCREATE INDEX idx_books_title_available ON books(title, available_copies) WHERE available_copies > 0;\nCREATE INDEX idx_books_year_available ON books(publication_year, available_copies) WHERE available_copies > 0;\n\n-- Index for recent books\nCREATE INDEX idx_books_recent ON books(created_at DESC) WHERE available_copies > 0;\n\n-- Composite index for user loan history queries\nCREATE INDEX idx_book_loans_user_date ON book_loans(user_id, loan_date DESC);\n\n-- Index for librarian dashboard queries\nCREATE INDEX idx_book_loans_active_due ON book_loans(due_date, status) WHERE status = 'active';\n\n-- Index for book popularity queries\nCREATE INDEX idx_book_loans_book_count ON book_loans(book_id, loan_date) WHERE status IN ('active', 'returned');\n\n-- Index for user activity queries\nCREATE INDEX idx_book_loans_user_activity ON book_loans(user_id, status, loan_date DESC);\n\n-- Partial index for currently borrowed books\nCREATE INDEX idx_book_loans_currently_borrowed ON book_loans(book_id, user_id, loan_date) WHERE status = 'active';\n\n-- Index for category-based book searches\nCREATE INDEX idx_book_categories_for_search ON book_categories(category_id, book_id);\n\n-- Statistics for query optimizer\nANALYZE users;\nANALYZE books;\nANALYZE categories;\nANALYZE book_categories;\nANALYZE book_loans;","timestamp":"2025-08-01 15:33:54:3354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO migrations (filename) VALUES ($1)","timestamp":"2025-08-01 15:33:54:3354"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mStarting database seeding...\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mClearing existing data...\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = replica","timestamp":"2025-08-01 15:34:03:343"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 15:34:03:343"}
{"duration":11,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_loans RESTART IDENTITY CASCADE","timestamp":"2025-08-01 15:34:03:343"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE books RESTART IDENTITY CASCADE","timestamp":"2025-08-01 15:34:03:343"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 15:34:03:343"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE users RESTART IDENTITY CASCADE","timestamp":"2025-08-01 15:34:03:343"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = DEFAULT","timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mExisting data cleared\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding users...\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 15:34:03:343"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: librarian@library.com (librarian)\u001b[39m","timestamp":"2025-08-01 15:34:03:343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: member@library.com (member)\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: aikaterini.chavela@library.com (member)\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: jane.smith@library.com (member)\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: alex.johnson@library.com (member)\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding categories...\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Web Development\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Programming Languages\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Software Engineering\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Data Science\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: DevOps & Cloud\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Mobile Development\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Database Systems\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Cybersecurity\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Artificial Intelligence\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding books...\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":12,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: JavaScript: The Good Parts\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Clean Code: A Handbook of Agile Software Craftsmanship\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Domain-Driven Design: Tackling Complexity in the Heart of Software\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Data-Intensive Applications\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Pragmatic Programmer: Your Journey To Mastery\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Python for Data Analysis\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Spring Boot in Action\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Learning React: Functional Web Development with React and Redux\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Effective Java\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: You Don't Know JS: Scope & Closures\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Docker in Action\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Kubernetes: Up and Running\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Web APIs\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Refactoring: Improving the Design of Existing Code\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: High Performance MySQL\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Well-Grounded Rubyist\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: MongoDB: The Definitive Guide\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Building Microservices\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Black Hat Python: Python Programming for Hackers and Pentesters\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Hands-On Machine Learning with Scikit-Learn and TensorFlow\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: React Native in Action\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Flutter Complete Reference\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Site Reliability Engineering\u001b[39m","timestamp":"2025-08-01 15:34:04:344"}
{"code":"23505","error":"duplicate key value violates unique constraint \"books_isbn_key\"","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mDatabase query error\u001b[39m","query":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_cop...","timestamp":"2025-08-01 15:34:04:344"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 15:40:26:4026"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:40:31:4031"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:40:31:4031"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:40:31:4031"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:40:56:4056"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:41:29:4129"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:41:29:4129"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:41:29:4129"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 15:42:46:4246"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 15:43:00:430"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 15:43:00:430"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 15:43:00:430","userId":"11947b92-f3d4-4469-b341-4bb3bb5f744a"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:43:30:4330"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:43:46:4346"}
{"duration":26,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 15:43:46:4346"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n       VALUES ($1, $2, $3, $4, $5, $6)\n       RETURNING *","timestamp":"2025-08-01 15:43:46:4346"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 15:43:46:4346"}
{"email":"testuser@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser registered successfully\u001b[39m","role":"member","timestamp":"2025-08-01 15:43:46:4346","userId":"f6f205ee-a50f-48af-bfcd-1f620c392ebe"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 15:43:50:4350"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":20,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 15:43:50:4350"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 15:43:54:4354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":20,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 15:43:54:4354"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:44:24:4424"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:45:16:4516"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:45:16:4516"}
{"duration":29,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 15:45:16:4516"}
{"duration":33,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 15:45:16:4516"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 15:45:16:4516"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 15:45:16:4516"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:45:46:4546"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:45:46:4546"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:45:58:4558"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":41,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"\n      SELECT id, name\n      FROM categories\n      ORDER BY name ASC\n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"\n      SELECT id, name\n      FROM categories\n      ORDER BY name ASC\n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 15:45:58:4558"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:46:28:4628"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 15:46:28:4628"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:03:473","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:03:473","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:04:474","url":"/api/health"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:47:04:474"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:47:04:474"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:47:04:474"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:04:474","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:18:4718","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:18:4718","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:18:4718","url":"/api/health"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:47:18:4718"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:47:18:4718"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:47:18:4718"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:22:4722","url":"/api/health","userAgent":"curl/8.7.1"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:23:4723","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:23:4723","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:23:4723","url":"/api/health"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:47:23:4723"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:47:23:4723"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:47:23:4723"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:41:4741","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:41:4741","url":"/api/health"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api/health\u001b[39m","method":"GET","stack":"Error: Not Found - /api/health\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-01 15:47:41:4741","url":"/api/health"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 15:47:41:4741"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:47:41:4741"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 15:47:41:4741"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 15:54:18:5418"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:07:46:746"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:07:46:746"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mStarting database seeding...\u001b[39m","timestamp":"2025-08-01 16:07:46:746"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mClearing existing data...\u001b[39m","timestamp":"2025-08-01 16:07:46:746"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = replica","timestamp":"2025-08-01 16:07:46:746"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:07:46:746"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_loans RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:07:46:746"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE books RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:07:47:747"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:07:47:747"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE users RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:07:47:747"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = DEFAULT","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mExisting data cleared\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding users...\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: librarian@library.com (librarian)\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: member@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: aikaterini.chavela@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:07:47:747"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: jane.smith@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:07:47:747"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: alex.johnson@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding categories...\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Web Development\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Programming Languages\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Software Engineering\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Data Science\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: DevOps & Cloud\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Mobile Development\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Database Systems\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Cybersecurity\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Artificial Intelligence\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding books...\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: JavaScript: The Good Parts\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Clean Code: A Handbook of Agile Software Craftsmanship\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Domain-Driven Design: Tackling Complexity in the Heart of Software\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Data-Intensive Applications\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Pragmatic Programmer: Your Journey To Mastery\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Python for Data Analysis\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Spring Boot in Action\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Learning React: Functional Web Development with React and Redux\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Effective Java\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: You Don't Know JS: Scope & Closures\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Docker in Action\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Kubernetes: Up and Running\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Web APIs\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Refactoring: Improving the Design of Existing Code\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: High Performance MySQL\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Well-Grounded Rubyist\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: MongoDB: The Definitive Guide\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Building Microservices\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Black Hat Python: Python Programming for Hackers and Pentesters\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Hands-On Machine Learning with Scikit-Learn and TensorFlow\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: React Native in Action\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Flutter Complete Reference\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Site Reliability Engineering\u001b[39m","timestamp":"2025-08-01 16:07:48:748"}
{"code":"23505","error":"duplicate key value violates unique constraint \"books_isbn_key\"","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mDatabase query error\u001b[39m","query":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_cop...","timestamp":"2025-08-01 16:07:48:748"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:11:18:1118"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:11:18:1118"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:11:18:1118"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:11:18:1118"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:14:07:147"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:14:07:147"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:14:07:147"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:14:30:1430"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:15:00:150"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:17:16:1716"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:17:16:1716","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:17:16:1716"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":22,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:17:16:1716"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"\n      SELECT id, name\n      FROM categories\n      ORDER BY name ASC\n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"\n      SELECT id, name\n      FROM categories\n      ORDER BY name ASC\n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:17:37:1737"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:18:07:187"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:18:07:187"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:18:09:189"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:18:09:189"}
{"duration":52,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:18:09:189"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:18:09:189"}
{"duration":52,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:18:09:189"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:18:09:189"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:18:09:189"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:18:09:189"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:18:09:189"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:18:09:189"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:18:35:1835"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:19:04:194"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:19:04:194"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:19:04:194","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:19:04:194"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:19:04:194"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:19:04:194"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:19:04:194"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:19:29:1929"}
{"duration":13,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE (\n        b.title ILIKE $1 OR \n        b.author ILIKE $1 OR \n        b.description ILIKE $1 OR\n        to_tsvector('english', b.title || ' ' || b.author || ' ' || COALESCE(b.description, '')) @@ plainto_tsquery('english', $1)\n      )\n    ","timestamp":"2025-08-01 16:19:44:1944"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE (\n        b.title ILIKE $1 OR \n        b.author ILIKE $1 OR \n        b.description ILIKE $1 OR\n        to_tsvector('english', b.title || ' ' || b.author || ' ' || COALESCE(b.description, '')) @@ plainto_tsquery('english', $1)\n      )\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:19:44:1944"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:19:53:1953"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:19:53:1953"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:19:59:1959"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE c.name ILIKE $1\n    ","timestamp":"2025-08-01 16:20:10:2010"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE c.name ILIKE $1\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:20:10:2010"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:20:18:2018"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:20:18:2018"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:20:26:2026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:20:26:2026"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:20:26:2026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:20:26:2026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:20:56:2056"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:21:20:2120"}
{"duration":29,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:21:20:2120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:21:20:2120"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:21:20:2120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:21:20:2120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:21:22:2122"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:21:22:2122"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:21:37:2137"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:21:37:2137"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:21:37:2137"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:21:37:2137"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:22:07:227"}
{"endpoint":"/api/auth/login","ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mAuth rate limit exceeded\u001b[39m","timestamp":"2025-08-01 16:23:52:2352","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"endpoint":"/api/auth/login","ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mAuth rate limit exceeded\u001b[39m","timestamp":"2025-08-01 16:24:09:249","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:25:18:2518"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:25:18:2518"}
{"duration":28,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:25:18:2518"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:25:18:2518"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:25:18:2518"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:25:18:2518"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:25:48:2548"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:25:48:2548"}
{"endpoint":"/api/auth/login","ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mAuth rate limit exceeded\u001b[39m","timestamp":"2025-08-01 16:25:50:2550","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:26:05:265"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:26:22:2622"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:26:28:2628"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:26:28:2628"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:26:28:2628","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:26:28:2628"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:26:28:2628"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:26:28:2628"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:26:28:2628"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:26:28:2628"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:26:47:2647"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:26:54:2654"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:26:54:2654"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:26:54:2654"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:26:54:2654"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:27:17:2717"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:27:24:2724"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:27:29:2729"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:27:29:2729"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:27:29:2729"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:27:29:2729","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:27:29:2729"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:27:29:2729"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:27:29:2729"}
{"duration":22,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:27:29:2729"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:27:29:2729"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:27:59:2759"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:27:59:2759"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:29:03:293"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:29:03:293"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:29:03:293"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:29:03:293","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:29:03:293"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:29:03:293"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:29:03:293"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:29:03:293"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:29:03:293"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:29:25:2925"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:29:25:2925"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:29:25:2925"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:29:25:2925"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:29:33:2933"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:29:33:2933"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:02:302"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:02:302"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-01 16:30:02:302"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-01 16:30:02:302"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:30:02:302"}
{"duration":14,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-01 16:30:02:302"}
{"bookId":"cf61fc1e-cfe5-4c02-bd14-5a847acb6856","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy reserved\u001b[39m","remainingCopies":1,"timestamp":"2025-08-01 16:30:02:302"}
{"duration":64,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      INSERT INTO book_loans (book_id, user_id, loan_date, due_date, status, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    ","timestamp":"2025-08-01 16:30:02:302"}
{"activeLoans":1,"bookId":"cf61fc1e-cfe5-4c02-bd14-5a847acb6856","dueDate":"2025-08-15T13:30:02.365Z","level":"\u001b[32minfo\u001b[39m","loanId":"3a984108-5ab7-448b-8664-662c88d955fd","message":"\u001b[32mBook borrowed successfully\u001b[39m","timestamp":"2025-08-01 16:30:02:302","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:30:02:302"}
{"bookId":"cf61fc1e-cfe5-4c02-bd14-5a847acb6856","level":"\u001b[32minfo\u001b[39m","loanId":"3a984108-5ab7-448b-8664-662c88d955fd","message":"\u001b[32mBook borrowed via API\u001b[39m","timestamp":"2025-08-01 16:30:02:302","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:30:02:302"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:30:02:302"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":22,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mGet user loans error: loan.toUserLoan is not a function\u001b[39m","stack":"TypeError: loan.toUserLoan is not a function\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:45\n    at Array.map (<anonymous>)\n    at getMyLoans (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-01 16:30:25:3025"}
{"ip":"::1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mServer error loan.toUserLoan is not a function\u001b[39m","method":"GET","stack":"TypeError: loan.toUserLoan is not a function\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:45\n    at Array.map (<anonymous>)\n    at getMyLoans (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":500,"timestamp":"2025-08-01 16:30:25:3025","url":"/api/loans/my-loans","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:30:25:3025"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mGet user loans error: loan.toUserLoan is not a function\u001b[39m","stack":"TypeError: loan.toUserLoan is not a function\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:45\n    at Array.map (<anonymous>)\n    at getMyLoans (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-01 16:30:25:3025"}
{"ip":"::1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mServer error loan.toUserLoan is not a function\u001b[39m","method":"GET","stack":"TypeError: loan.toUserLoan is not a function\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:45\n    at Array.map (<anonymous>)\n    at getMyLoans (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:160:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":500,"timestamp":"2025-08-01 16:30:25:3025","url":"/api/loans/my-loans","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:30:55:3055"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:30:55:3055"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:31:03:313"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:31:09:319"}
{"duration":29,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:09:319"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:31:09:319"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:31:39:3139"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:31:39:3139"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:31:43:3143"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:31:43:3143"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31mReturn book error: Cannot destructure property 'return_date' of 'req.body' as it is undefined.\u001b[39m","stack":"TypeError: Cannot destructure property 'return_date' of 'req.body' as it is undefined.\n    at returnBook (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:96:15)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/route.js:157:13)\n    at middleware (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-01 16:31:43:3143"}
{"ip":"::1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mServer error Cannot destructure property 'return_date' of 'req.body' as it is undefined.\u001b[39m","method":"POST","stack":"TypeError: Cannot destructure property 'return_date' of 'req.body' as it is undefined.\n    at returnBook (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/controllers/LoanController.js:96:15)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/route.js:157:13)\n    at middleware (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","status":500,"timestamp":"2025-08-01 16:31:43:3143","url":"/api/loans/3a984108-5ab7-448b-8664-662c88d955fd/return","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:32:13:3213"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":28,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE book_loans SET status = $1, return_date = $2 WHERE id = $3 RETURNING *","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-01 16:32:24:3224"}
{"availableCopies":1,"bookId":"cf61fc1e-cfe5-4c02-bd14-5a847acb6856","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy released\u001b[39m","timestamp":"2025-08-01 16:32:24:3224"}
{"bookId":"cf61fc1e-cfe5-4c02-bd14-5a847acb6856","level":"\u001b[32minfo\u001b[39m","loanId":"3a984108-5ab7-448b-8664-662c88d955fd","message":"\u001b[32mBook returned successfully\u001b[39m","returnDate":"2025-08-01T13:32:24.391Z","returnedBy":"69bd7618-20a9-4271-85c9-5177c423d80c","timestamp":"2025-08-01 16:32:24:3224","userId":"69bd7618-20a9-4271-85c9-5177c423d80c","wasOverdue":false}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:32:24:3224"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"3a984108-5ab7-448b-8664-662c88d955fd","message":"\u001b[32mBook returned via API\u001b[39m","returnedBy":"69bd7618-20a9-4271-85c9-5177c423d80c","timestamp":"2025-08-01 16:32:24:3224","userId":"69bd7618-20a9-4271-85c9-5177c423d80c"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:32:24:3224"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:32:24:3224"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:32:54:3254"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:35:56:3556"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:36:07:367"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:36:11:3611"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:36:11:3611"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:36:11:3611"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:36:17:3617"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:36:37:3637"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:36:37:3637"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:36:41:3641"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE c.name ILIKE $1\n    ","timestamp":"2025-08-01 16:36:51:3651"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE c.name ILIKE $1\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:36:51:3651"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:37:07:377"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:37:21:3721"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-01 16:38:12:3812"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-01 16:38:13:3813"}
{"duration":9,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n    ","timestamp":"2025-08-01 16:38:17:3817"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:38:17:3817"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:38:43:3843"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:38:43:3843"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n    ","timestamp":"2025-08-01 16:38:57:3857"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:38:57:3857"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:39:27:3927"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mStarting database seeding...\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mClearing existing data...\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = replica","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE book_loans RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE books RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE categories RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"TRUNCATE TABLE users RESTART IDENTITY CASCADE","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"SET session_replication_role = DEFAULT","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mExisting data cleared\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding users...\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: librarian@library.com (librarian)\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: member@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:40:20:4020"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: aikaterini.chavela@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:40:20:4020"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: jane.smith@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO users (email, password_hash, first_name, last_name, role, max_books_allowed)\n        VALUES ($1, $2, $3, $4, $5, $6)\n        RETURNING id, email, role\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated user: alex.johnson@library.com (member)\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding categories...\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Web Development\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Programming Languages\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Software Engineering\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Data Science\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: DevOps & Cloud\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Mobile Development\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Database Systems\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Cybersecurity\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO categories (name, description)\n        VALUES ($1, $2)\n        RETURNING id, name\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated category: Artificial Intelligence\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSeeding books...\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: JavaScript: The Good Parts\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Clean Code: A Handbook of Agile Software Craftsmanship\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Domain-Driven Design: Tackling Complexity in the Heart of Software\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Data-Intensive Applications\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Pragmatic Programmer: Your Journey To Mastery\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Python for Data Analysis\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Spring Boot in Action\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Learning React: Functional Web Development with React and Redux\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Effective Java\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: You Don't Know JS: Scope & Closures\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Docker in Action\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Kubernetes: Up and Running\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Designing Web APIs\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Refactoring: Improving the Design of Existing Code\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: High Performance MySQL\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: The Well-Grounded Rubyist\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: MongoDB: The Definitive Guide\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Building Microservices\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Black Hat Python: Python Programming for Hackers and Pentesters\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Hands-On Machine Learning with Scikit-Learn and TensorFlow\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: React Native in Action\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Flutter Complete Reference\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_copies, available_copies, cover_image_url)\n        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)\n        RETURNING id, title, isbn\n      ","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mCreated book: Site Reliability Engineering\u001b[39m","timestamp":"2025-08-01 16:40:21:4021"}
{"code":"23505","error":"duplicate key value violates unique constraint \"books_isbn_key\"","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mDatabase query error\u001b[39m","query":"\n        INSERT INTO books (isbn, title, author, publisher, publication_year, description, total_cop...","timestamp":"2025-08-01 16:40:21:4021"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:41:20:4120"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:41:20:4120"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":34,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:41:20:4120"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-01 16:41:48:4148"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-01 16:41:48:4148"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-01 16:41:48:4148","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:41:48:4148"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:41:48:4148"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:41:48:4148"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:41:48:4148"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:41:50:4150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:41:55:4155"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n    ","timestamp":"2025-08-01 16:42:11:4211"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":2,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      WHERE EXISTS (\n        SELECT 1 FROM book_categories bc2\n        JOIN categories c2 ON bc2.category_id = c2.id\n        WHERE bc2.book_id = b.id AND c2.name = $1\n      )\n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:42:11:4211"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:42:25:4225"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:42:41:4241"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:43:30:4330"}
{"duration":34,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:30:4330"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:43:30:4330"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:30:4330"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:43:30:4330"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":12,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-01 16:43:33:4333"}
{"bookId":"e9d1e009-7139-4116-bd76-64ccdc69e7db","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy reserved\u001b[39m","remainingCopies":1,"timestamp":"2025-08-01 16:43:33:4333"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      INSERT INTO book_loans (book_id, user_id, loan_date, due_date, status, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    ","timestamp":"2025-08-01 16:43:33:4333"}
{"activeLoans":1,"bookId":"e9d1e009-7139-4116-bd76-64ccdc69e7db","dueDate":"2025-08-15T13:43:33.567Z","level":"\u001b[32minfo\u001b[39m","loanId":"7eb39f3f-9a66-4ce4-84d4-c3b90785e896","message":"\u001b[32mBook borrowed successfully\u001b[39m","timestamp":"2025-08-01 16:43:33:4333","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:43:33:4333"}
{"bookId":"e9d1e009-7139-4116-bd76-64ccdc69e7db","level":"\u001b[32minfo\u001b[39m","loanId":"7eb39f3f-9a66-4ce4-84d4-c3b90785e896","message":"\u001b[32mBook borrowed via API\u001b[39m","timestamp":"2025-08-01 16:43:33:4333","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:43:33:4333"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:36:4336"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:36:4336"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-01 16:43:36:4336"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-01 16:43:36:4336"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:37:4337"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:37:4337"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-01 16:43:38:4338"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-01 16:43:38:4338"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":26,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:43:40:4340"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE book_loans SET status = $1, return_date = $2 WHERE id = $3 RETURNING *","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-01 16:43:43:4343"}
{"availableCopies":2,"bookId":"e9d1e009-7139-4116-bd76-64ccdc69e7db","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy released\u001b[39m","timestamp":"2025-08-01 16:43:43:4343"}
{"bookId":"e9d1e009-7139-4116-bd76-64ccdc69e7db","level":"\u001b[32minfo\u001b[39m","loanId":"7eb39f3f-9a66-4ce4-84d4-c3b90785e896","message":"\u001b[32mBook returned successfully\u001b[39m","returnDate":"2025-08-01T13:43:43.266Z","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-01 16:43:43:4343","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","wasOverdue":false}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-01 16:43:43:4343"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"7eb39f3f-9a66-4ce4-84d4-c3b90785e896","message":"\u001b[32mBook returned via API\u001b[39m","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-01 16:43:43:4343","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-01 16:43:43:4343"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-01 16:43:45:4345"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:43:47:4347"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:43:47:4347"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:43:47:4347"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-01 16:43:47:4347"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:54:4354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:43:54:4354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-01 16:43:54:4354"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-01 16:43:54:4354"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:44:17:4417"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-01 16:44:24:4424"}
{"code":"ECONNREFUSED","error":"","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mDatabase query error\u001b[39m","query":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_a...","timestamp":"2025-08-01 18:36:48:3648"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:05:19:519"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:07:53:753"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:07:53:753"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":null,"text":"\n      CREATE TABLE IF NOT EXISTS migrations (\n        id SERIAL PRIMARY KEY,\n        filename VARCHAR(255) NOT NULL UNIQUE,\n        executed_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n      )\n    ","timestamp":"2025-08-02 18:07:53:753"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMigrations table ready\u001b[39m","timestamp":"2025-08-02 18:07:53:753"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":6,"text":"SELECT filename FROM migrations ORDER BY id","timestamp":"2025-08-02 18:07:53:753"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:08:02:82"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:08:32:832"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSIGTERM received, closing database connections\u001b[39m","timestamp":"2025-08-02 18:10:07:107"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:10:16:1016"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:10:46:1046"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:11:04:114"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:11:04:114"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:11:04:114"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:11:04:114"}
{"duration":27,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:04:114"}
{"duration":25,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:04:114"}
{"duration":43,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:04:114"}
{"duration":48,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:04:114"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:04:114"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:04:114"}
{"duration":10,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:11:04:114"}
{"duration":10,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:11:04:114"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:04:114"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:04:114"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:30:1130"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:11:30:1130"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged out successfully\u001b[39m","timestamp":"2025-08-02 18:11:30:1130","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:11:34:1134"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:11:34:1134"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:11:34:1134"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:11:50:1150"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-02 18:11:50:1150","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":25,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:11:50:1150"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:11:50:1150"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:12:20:1220"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:12:20:1220"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:15:35:1535"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:15:35:1535"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:15:35:1535"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:15:39:1539"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:15:39:1539"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:15:39:1539"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:15:39:1539"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:15:39:1539"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:15:39:1539"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:16:09:169"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🚀 Library Management System API started\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📚 API Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m💻 Health Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32m🔑 Test Accounts:\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:24:32:2432"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:24:38:2438"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:24:38:2438"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:24:38:2438"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:24:38:2438"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:24:38:2438"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:24:38:2438"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:25:08:258"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      \n    ","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      \n      ORDER BY bl.loan_date DESC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      \n    ","timestamp":"2025-08-02 18:25:41:2541"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      \n      ORDER BY bl.loan_date DESC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:25:41:2541"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:26:11:2611"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:26:31:2631"}
{"duration":28,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:26:31:2631"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.status = $1\n    ","timestamp":"2025-08-02 18:26:31:2631"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 18:26:31:2631"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:26:42:2642"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.status = $1\n    ","timestamp":"2025-08-02 18:26:42:2642"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 18:26:42:2642"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:27:12:2712"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:27:14:2714"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:14:2714"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:27:14:2714"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":22,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":25,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:14:2714"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:27:32:2732"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:28:02:282"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:28:02:282"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:28:02:282"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:28:02:282"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":25,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:28:30:2830"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:28:30:2830"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":19,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":19,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":22,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:28:30:2830"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:29:00:290"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:29:00:290"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:29:00:290"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:29:00:290"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:30:17:3017"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":37,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":39,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:30:17:3017"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:30:28:3028"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 18:30:32:3032"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:30:33:3033"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:30:33:3033"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:31:03:313"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:31:03:313"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:33:41:3341"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:33:54:3354"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:34:24:3424"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:34:32:3432"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m📡 Server listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m🌍 Environment: development\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:34:33:3433"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:35:03:353"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 18:36:28:3628"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:36:58:3658"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:39:13:3913"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:39:13:3913"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":36,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 18:39:13:3913"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 18:39:13:3913"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:49:08:498"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:49:08:498"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 18:49:08:498"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:10:26:1026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:10:26:1026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:10:26:1026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:10:26:1026"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:10:26:1026"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:17:50:1750"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:17:50:1750"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:17:50:1750"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:17:50:1750"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 19:21:12:2112"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:21:12:2112"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 19:21:12:2112"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:21:44:2144"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:44:2144"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:47:2147"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:21:48:2148"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:22:18:2218"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:22:18:2218"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:23:05:235"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:23:05:235"}
{"duration":35,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":37,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:05:235"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:07:237"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:09:239"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:12:2312"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:23:14:2314"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:15:2315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        b.*,\n        COUNT(bl.id) as borrow_count,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_loans bl ON b.id = bl.book_id \n        AND bl.loan_date >= NOW() - INTERVAL '30 days'\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      GROUP BY b.id\n      HAVING COUNT(bl.id) > 0\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n      \n      GROUP BY b.id\n      ORDER BY b.created_at DESC\n      LIMIT $1\n    ","timestamp":"2025-08-02 19:23:16:2316"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:23:46:2346"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:23:46:2346"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 19:36:53:3653"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 19:36:58:3658"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:36:58:3658"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 19:36:58:3658"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:37:23:3723"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mSIGTERM received, closing database connections\u001b[39m","timestamp":"2025-08-02 19:38:30:3830"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 19:38:36:3836"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-02 19:40:08:408"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:40:38:4038"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:42:14:4214"}
{"duration":34,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-02 19:42:14:4214"}
{"duration":13,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:42:14:4214"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-02 19:42:14:4214","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-02 19:42:27:4227"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:42:27:4227"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-02 19:42:27:4227","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:42:57:4257"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:44:24:4424"}
{"duration":50,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:44:24:4424"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:44:24:4424"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:44:37:4437"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:44:37:4437"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:44:50:4450"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":33,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:44:50:4450"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:45:16:4516"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:45:16:4516"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged out successfully\u001b[39m","timestamp":"2025-08-02 19:45:16:4516","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:45:20:4520"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-02 19:45:27:4527"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:45:28:4528"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-02 19:45:28:4528","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:28:4528"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:28:4528"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:28:4528"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:28:4528"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:45:30:4530"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:30:4530"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:31:4531"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:31:4531"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:31:4531"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:31:4531"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT COUNT(*) FROM categories","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":9,"text":"SELECT * FROM categories ORDER BY name ASC LIMIT $1 OFFSET $2","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":12,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:33:4533"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:45:55:4555"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:45:55:4555"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:45:55:4555"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:45:55:4555"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:57:4557"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:57:4557"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:45:57:4557"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:45:57:4557"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:45:58:4558"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:01:461"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:01:461"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-02 19:46:01:461"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-02 19:46:01:461"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:01:461"}
{"duration":26,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-02 19:46:01:461"}
{"bookId":"fb9cf8af-3485-438f-b276-74e765a49d09","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy reserved\u001b[39m","remainingCopies":1,"timestamp":"2025-08-02 19:46:01:461"}
{"duration":13,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      INSERT INTO book_loans (book_id, user_id, loan_date, due_date, status, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    ","timestamp":"2025-08-02 19:46:01:461"}
{"activeLoans":1,"bookId":"fb9cf8af-3485-438f-b276-74e765a49d09","dueDate":"2025-08-16T16:46:01.494Z","level":"\u001b[32minfo\u001b[39m","loanId":"f62df23d-4f11-4f97-8030-16770760426b","message":"\u001b[32mBook borrowed successfully\u001b[39m","timestamp":"2025-08-02 19:46:01:461","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-02 19:46:01:461"}
{"bookId":"fb9cf8af-3485-438f-b276-74e765a49d09","level":"\u001b[32minfo\u001b[39m","loanId":"f62df23d-4f11-4f97-8030-16770760426b","message":"\u001b[32mBook borrowed via API\u001b[39m","timestamp":"2025-08-02 19:46:01:461","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:01:461"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:01:461"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:46:03:463"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:03:463"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:03:463"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:46:04:464"}
{"duration":29,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:04:464"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:04:464"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:04:464"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:04:464"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:46:05:465"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:46:05:465"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:46:05:465"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:46:05:465"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:07:467"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:07:467"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:07:467"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:07:467"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:09:469"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:09:469"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-02 19:46:09:469"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-02 19:46:09:469"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:09:469"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-02 19:46:09:469"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy reserved\u001b[39m","remainingCopies":3,"timestamp":"2025-08-02 19:46:09:469"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      INSERT INTO book_loans (book_id, user_id, loan_date, due_date, status, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    ","timestamp":"2025-08-02 19:46:09:469"}
{"activeLoans":2,"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","dueDate":"2025-08-16T16:46:09.333Z","level":"\u001b[32minfo\u001b[39m","loanId":"3e110400-9586-4963-900c-b84c91de3505","message":"\u001b[32mBook borrowed successfully\u001b[39m","timestamp":"2025-08-02 19:46:09:469","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-02 19:46:09:469"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","loanId":"3e110400-9586-4963-900c-b84c91de3505","message":"\u001b[32mBook borrowed via API\u001b[39m","timestamp":"2025-08-02 19:46:09:469","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:09:469"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-02 19:46:09:469"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:46:10:4610"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:46:10:4610"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 19:46:10:4610"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 19:46:10:4610"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:46:15:4615"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE book_loans SET status = $1, return_date = $2 WHERE id = $3 RETURNING *","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-02 19:46:26:4626"}
{"availableCopies":4,"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy released\u001b[39m","timestamp":"2025-08-02 19:46:26:4626"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","loanId":"3e110400-9586-4963-900c-b84c91de3505","message":"\u001b[32mBook returned successfully\u001b[39m","returnDate":"2025-08-02T16:46:26.511Z","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-02 19:46:26:4626","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","wasOverdue":false}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-02 19:46:26:4626"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"3e110400-9586-4963-900c-b84c91de3505","message":"\u001b[32mBook returned via API\u001b[39m","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-02 19:46:26:4626","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:46:26:4626"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:46:26:4626"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:46:45:4645"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:46:56:4656"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:09:479"}
{"duration":27,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:09:479"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:09:479"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:47:09:479"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:47:39:4739"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:47:39:4739"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:45:4745"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:45:4745"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:45:4745"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":29,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        AVG(EXTRACT(DAY FROM (COALESCE(return_date, NOW()) - loan_date)))::INTEGER as avg_loan_duration,\n        MAX(loan_date) as last_loan_date,\n        COUNT(DISTINCT book_id) as unique_books_borrowed\n      FROM book_loans\n      WHERE user_id = $1\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:45:4745"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:47:52:4752"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:05:485"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:48:05:485"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:11:4811"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1 AND bl.status = $2\n    ","timestamp":"2025-08-02 19:48:11:4811"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = $2\n      ORDER BY bl.loan_date DESC\n      LIMIT $3 OFFSET $4\n    ","timestamp":"2025-08-02 19:48:11:4811"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:13:4813"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-02 19:48:13:4813"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-02 19:48:13:4813"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:48:15:4815"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:48:15:4815"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 19:48:17:4817"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 19:48:17:4817"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged out successfully\u001b[39m","timestamp":"2025-08-02 19:48:17:4817","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:48:35:4835"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 19:48:47:4847"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:02:32:232"}
{"duration":39,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-02 20:02:32:232"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 20:02:33:233"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-02 20:02:33:233","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:03:03:33"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:03:04:34"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:04:34"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:04:34"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:03:34:334"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:03:57:357"}
{"duration":27,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:57:357"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:57:357"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 20:03:57:357"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 20:03:57:357"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 20:03:57:357"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 20:03:57:357"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:03:57:357"}
{"duration":19,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:57:357"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 20:03:57:357"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:03:57:357"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 20:03:57:357"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:04:27:427"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:04:27:427"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:15:02:152"}
{"duration":36,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 20:15:02:152"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 20:15:02:152"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 20:15:02:152"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 20:15:02:152"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 20:15:02:152"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 20:15:02:152"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 20:15:02:152"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"duration":4,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 20:15:02:152"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:30:30:3030"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 20:30:30:3030"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 21:15:48:1548"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":38,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":38,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 21:15:48:1548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 21:15:48:1548"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 22:38:14:3814"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 22:38:14:3814"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 22:44:30:4430"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":32,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:44:30:4430"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 22:44:30:4430"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 22:45:14:4514"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 22:45:14:4514"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":34,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":18,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-02 22:45:14:4514"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-02 22:45:14:4514"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 23:16:49:1649"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-02 23:16:49:1649"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-04 14:50:56:5056"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":34,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":36,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-04 14:50:56:5056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-04 14:50:56:5056"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-04 15:29:46:2946"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-04 15:29:46:2946"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-05 11:45:48:4548"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":44,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":44,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":5,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-05 11:45:48:4548"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-05 11:45:48:4548"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-05 12:03:46:346"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-05 12:03:46:346"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 12:40:54:4054"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":47,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":47,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":6,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":7,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:54:4054"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:55:4055"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:56:4056"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:40:57:4057"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:40:57:4057"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 12:41:27:4127"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 12:41:27:4127"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":33,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 12:47:17:4717"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 12:47:17:4717"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 12:48:29:4829"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 12:48:29:4829"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 13:23:55:2355"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 13:24:19:2419"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-09 13:24:25:2425"}
{"duration":13,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 13:24:26:2426"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in successfully\u001b[39m","rememberMe":false,"timestamp":"2025-08-09 13:24:26:2426","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 13:24:26:2426"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 13:24:26:2426"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 13:24:26:2426"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 13:24:26:2426"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 13:24:39:2439"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 13:24:39:2439"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 13:24:39:2439"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 13:24:39:2439"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 13:25:09:259"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 13:26:32:2632"}
{"duration":30,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 13:26:32:2632"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 13:27:02:272"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":31,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 13:35:38:3538"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 13:35:38:3538"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 13:52:52:5252"}
{"ip":"::1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mServer error Not allowed by CORS\u001b[39m","method":"OPTIONS","stack":"Error: Not allowed by CORS\n    at origin (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/config/app.js:34:18)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at sanitizeInput (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/security.js:144:3)","status":500,"timestamp":"2025-08-09 15:10:09:109","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:37:42:3742"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:37:42:3742"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:37:42:3742"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:41:19:4119"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:41:49:4149"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:42:10:4210"}
{"duration":42,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-09 21:42:10:4210"}
{"duration":10,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 21:42:11:4211"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in\u001b[39m","rememberMe":false,"timestamp":"2025-08-09 21:42:11:4211","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 21:42:11:4211"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:42:11:4211"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-09 21:42:18:4218"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-09 21:42:18:4218"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-09 21:42:18:4218"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-09 21:42:18:4218"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":17,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1 AND bl.status = 'active'\n      ORDER BY bl.due_date ASC\n    ","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT * FROM book_loans \n      WHERE user_id = $1 AND book_id = $2 AND status = 'active'\n    ","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":9,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-09 21:42:23:4223"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy reserved\u001b[39m","remainingCopies":3,"timestamp":"2025-08-09 21:42:23:4223"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      INSERT INTO book_loans (book_id, user_id, loan_date, due_date, status, notes)\n      VALUES ($1, $2, $3, $4, $5, $6)\n      RETURNING *\n    ","timestamp":"2025-08-09 21:42:23:4223"}
{"activeLoans":2,"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","dueDate":"2025-08-23T18:42:23.914Z","level":"\u001b[32minfo\u001b[39m","loanId":"9e766a14-8f06-4e48-9892-c49fdfb952c4","message":"\u001b[32mBook borrowed\u001b[39m","timestamp":"2025-08-09 21:42:23:4223","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-09 21:42:23:4223"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","loanId":"9e766a14-8f06-4e48-9892-c49fdfb952c4","message":"\u001b[32mBook borrowed via API\u001b[39m","timestamp":"2025-08-09 21:42:23:4223","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n        SELECT c.id, c.name, c.description\n        FROM categories c\n        JOIN book_categories bc ON c.id = bc.category_id\n        WHERE bc.book_id = $1\n        ORDER BY c.name\n      ","timestamp":"2025-08-09 21:42:23:4223"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":4,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":4,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-09 21:42:30:4230"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE book_loans SET status = $1, return_date = $2 WHERE id = $3 RETURNING *","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM books WHERE id = $1","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      UPDATE books \n      SET available_copies = available_copies + $1 \n      WHERE id = $2 AND available_copies + $1 >= 0 AND available_copies + $1 <= total_copies\n      RETURNING *\n    ","timestamp":"2025-08-09 21:42:37:4237"}
{"availableCopies":4,"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mBook copy released\u001b[39m","timestamp":"2025-08-09 21:42:37:4237"}
{"bookId":"fdcb0478-a766-4a60-8861-b9120b73e1ff","level":"\u001b[32minfo\u001b[39m","loanId":"9e766a14-8f06-4e48-9892-c49fdfb952c4","message":"\u001b[32mBook returned\u001b[39m","returnDate":"2025-08-09T18:42:37.802Z","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-09 21:42:37:4237","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","wasOverdue":false}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n        SELECT \n          bl.*,\n          b.title as book_title,\n          b.author as book_author,\n          b.isbn as book_isbn,\n          b.cover_image_url as book_cover,\n          u.first_name || ' ' || u.last_name as user_name,\n          u.email as user_email\n        FROM book_loans bl\n        LEFT JOIN books b ON bl.book_id = b.id\n        LEFT JOIN users u ON bl.user_id = u.id\n        WHERE bl.id = $1\n      ","timestamp":"2025-08-09 21:42:37:4237"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"9e766a14-8f06-4e48-9892-c49fdfb952c4","message":"\u001b[32mBook returned via API\u001b[39m","returnedBy":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d","timestamp":"2025-08-09 21:42:37:4237","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      WHERE bl.user_id = $1\n    ","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":4,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      WHERE bl.user_id = $1\n      ORDER BY bl.loan_date DESC\n      LIMIT $2 OFFSET $3\n    ","timestamp":"2025-08-09 21:42:37:4237"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:42:48:4248"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 21:42:48:4248"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged out successfully\u001b[39m","timestamp":"2025-08-09 21:42:48:4248","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-08-09 21:43:15:4315"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in\u001b[39m","rememberMe":false,"timestamp":"2025-08-09 21:43:15:4315","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 21:43:15:4315"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 21:43:24:4324"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:24:4324"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-08-09 21:43:24:4324"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":10,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:24:4324"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":0,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email,\n        EXTRACT(DAY FROM (NOW() - bl.due_date))::INTEGER as days_overdue\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      WHERE bl.status = 'active' AND bl.due_date < NOW()\n      ORDER BY bl.due_date ASC\n      LIMIT $1\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:43:32:4332"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":23,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_books,\n        SUM(total_copies) as total_copies,\n        SUM(available_copies) as available_copies,\n        COUNT(*) FILTER (WHERE available_copies > 0) as available_books,\n        COUNT(*) FILTER (WHERE available_copies = 0) as unavailable_books,\n        COUNT(DISTINCT author) as unique_authors,\n        COUNT(DISTINCT publisher) as unique_publishers,\n        AVG(publication_year) as avg_publication_year,\n        COUNT(*) FILTER (WHERE created_at >= NOW() - INTERVAL '30 days') as new_books_this_month\n      FROM books\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":3,"text":"\n      SELECT \n        b.id,\n        b.title,\n        b.author,\n        b.isbn,\n        COUNT(bl.id) as borrow_count\n      FROM books b\n      JOIN book_loans bl ON b.id = bl.book_id\n      WHERE bl.loan_date >= NOW() - INTERVAL '30 days'\n      GROUP BY b.id, b.title, b.author, b.isbn\n      ORDER BY borrow_count DESC, b.title ASC\n      LIMIT $1\n    ","timestamp":"2025-08-09 21:43:32:4332"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:42:4342"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      \n    ","timestamp":"2025-08-09 21:43:42:4342"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":4,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      \n      ORDER BY bl.loan_date DESC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:42:4342"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-08-09 21:43:42:4342"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(*) \n      FROM book_loans bl \n      \n    ","timestamp":"2025-08-09 21:43:42:4342"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":4,"text":"\n      SELECT \n        bl.*,\n        b.title as book_title,\n        b.author as book_author,\n        b.isbn as book_isbn,\n        b.cover_image_url as book_cover,\n        u.first_name || ' ' || u.last_name as user_name,\n        u.email as user_email\n      FROM book_loans bl\n      JOIN books b ON bl.book_id = b.id\n      JOIN users u ON bl.user_id = u.id\n      \n      ORDER BY bl.loan_date DESC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-08-09 21:43:42:4342"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:44:02:442"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:44:02:442"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:44:02:442"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:44:12:4412"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAPI Documentation: http://localhost:5001/api-docs\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:45:00:450"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:45:22:4522"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:45:41:4541"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:46:11:4611"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /api-docs/\u001b[39m","method":"GET","stack":"Error: Not Found - /api-docs/\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-09 21:46:38:4638","url":"/api-docs/","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"ip":"::1","level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33mClient error Not Found - /favicon.ico\u001b[39m","method":"GET","stack":"Error: Not Found - /favicon.ico\n    at notFound (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/errorHandler.js:15:17)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:147:12)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)","status":404,"timestamp":"2025-08-09 21:46:38:4638","url":"/favicon.ico","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:48:35:4835"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:49:05:495"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:50:32:5032"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:51:02:512"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-08-09 21:51:30:5130"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-08-09 21:51:31:5131"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-08-09 21:52:01:521"}
{"ip":"::1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31mServer error Not allowed by CORS\u001b[39m","method":"OPTIONS","stack":"Error: Not allowed by CORS\n    at origin (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/config/app.js:34:18)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handleRequest (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/lib/layer.js:152:17)\n    at trimPrefix (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:342:13)\n    at /Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:297:9\n    at processParams (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:582:12)\n    at next (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/node_modules/router/index.js:291:5)\n    at sanitizeInput (/Users/igeorgiadis/Library/Mobile Documents/com~apple~CloudDocs/cf7-kchavela-2025/backend/src/middlewares/security.js:144:3)","status":500,"timestamp":"2025-08-09 22:08:03:83","url":"/api/auth/login","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:03:16:316"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:03:59:359"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-09-16 16:04:41:441"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mTesting database connection...\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connection established\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrary Management System API started\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mServer listening on port 5001\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mEnvironment: development\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mHealth Check: http://localhost:5001/health\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m\u001b[39m\n\u001b[32mTest Accounts:\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mLibrarian: librarian@library.com / LibPass123!\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mMember: member@library.com / MemPass123!\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mAikaterini: aikaterini.chavela@library.com / AikaPass123!\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mDatabase connected successfully\u001b[39m","poolStats":{"idle":0,"total":1,"waiting":0},"timestamp":"2025-09-16 16:04:43:443"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-09-16 16:05:13:513"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mNew database client connected\u001b[39m","timestamp":"2025-09-16 16:05:36:536"}
{"duration":39,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-09-16 16:05:36:536"}
{"duration":21,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-09-16 16:05:36:536"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in\u001b[39m","rememberMe":false,"timestamp":"2025-09-16 16:05:36:536","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"duration":13,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-09-16 16:05:36:536"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-09-16 16:05:36:536"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-09-16 16:05:36:536"}
{"duration":8,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT \n        COUNT(*) as total_loans,\n        COUNT(*) FILTER (WHERE status = 'active') as active_loans,\n        COUNT(*) FILTER (WHERE status = 'returned') as returned_loans,\n        COUNT(*) FILTER (WHERE status = 'overdue') as overdue_loans,\n        COUNT(*) FILTER (WHERE status = 'active' AND due_date < NOW()) as newly_overdue,\n        COUNT(*) FILTER (WHERE loan_date >= NOW() - INTERVAL '30 days') as loans_this_month,\n        AVG(EXTRACT(DAY FROM (return_date - loan_date)))::INTEGER as avg_loan_duration,\n        COUNT(DISTINCT user_id) as active_borrowers,\n        COUNT(DISTINCT book_id) as borrowed_books\n      FROM book_loans\n    ","timestamp":"2025-09-16 16:05:36:536"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE id = $1","timestamp":"2025-09-16 16:05:41:541"}
{"duration":3,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-09-16 16:05:41:541"}
{"email":"librarian@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged out successfully\u001b[39m","timestamp":"2025-09-16 16:05:41:541","userId":"73697252-2a28-4b7a-9bda-51f8ef36d320"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"SELECT * FROM users WHERE email = $1","timestamp":"2025-09-16 16:05:51:551"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"UPDATE users SET refresh_token = $1 WHERE id = $2","timestamp":"2025-09-16 16:05:52:552"}
{"email":"member@library.com","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32mUser logged in\u001b[39m","rememberMe":false,"timestamp":"2025-09-16 16:05:52:552","userId":"8f67dba0-ee04-40eb-ae05-21fe8e3ab70d"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-09-16 16:05:52:552"}
{"duration":2,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-09-16 16:05:52:552"}
{"duration":0,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":1,"text":"\n      SELECT COUNT(DISTINCT b.id) \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n     \n    ","timestamp":"2025-09-16 16:05:52:552"}
{"duration":1,"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mExecuted query\u001b[39m","rows":8,"text":"\n      SELECT \n        b.*,\n        COALESCE(\n          json_agg(\n            json_build_object('id', c.id, 'name', c.name, 'description', c.description)\n          ) FILTER (WHERE c.id IS NOT NULL), \n          '[]'\n        ) as categories\n      \n      FROM books b\n      LEFT JOIN book_categories bc ON b.id = bc.book_id\n      LEFT JOIN categories c ON bc.category_id = c.id\n    \n      \n      GROUP BY b.id\n      ORDER BY b.title ASC\n      LIMIT $1 OFFSET $2\n    ","timestamp":"2025-09-16 16:05:52:552"}
{"level":"\u001b[37mdebug\u001b[39m","message":"\u001b[37mDatabase client removed\u001b[39m","timestamp":"2025-09-16 16:06:22:622"}
